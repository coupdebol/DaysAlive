doctype
html( lang="en" )
    head
        title How Many days
        meta( charset='utf-8' )
        meta( http-equiv='X-UA-Compatible', content='IE=edge' )
        meta( name='viewport', content='width=device-width, initial-scale=1.0' )
        meta( name='description', content='Baking Bootstrap Snippets with Jade' )
        //- Bootswatch Theme
        link(href="//maxcdn.bootstrapcdn.com/bootswatch/3.3.0/slate/bootstrap.min.css", rel="stylesheet")
    body(style="padding-bottom:10rem;").container
        script( src='//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js' )
        script( src='//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js' )


        div.row
            div.col-md-12.col-sm-12.col-xs-12
                h3 Enter your date of birth
            div.col-md-6.col-sm-6.col-xs-12
                form#dobForm.form-horizontal(action='api/bears' method='POST')
                    div.form-group
                        label.col-sm-4.control-label(for='name') Name:
                        div.col-sm-8
                            input.form-control#name( type="text",name='name' )
                    div.form-group
                        label.col-sm-4.control-label(for='datepicker') Date of Birth:
                        div.col-sm-8
                            input.form-control( type="text",name='date_of_birth',placeholder='dd/mm/yyyy' )
                    div.form-group
                        div.col-sm-offset-4.col-sm-8
                            button#calculate.btn.btn-default(type="button") Calculate
            div.col-md-6.col-sm-6.col-xs-12
                .panel.panel-default
                    .panel-heading Days lived
                    .panel-body
                        h3
                            span#dayslived 12312
            div.col-md-12.col-sm-12.col-xs-12
                .panel.panel-default
                    .panel-heading History
                    .panel-body
                        table#history.table
                            thead
                                tr
                                    th id
                                    th Name
                                    th Date of birth
                                    th Days lived
                            tbody
                                tr
                                    td asd
                                    td asdf
                                    td asfASDFG
                                    td dsf



    script.
        $(document).ready(function () {
            populateHistory();
        });
        $("#calculate").click(function () {
            $.post("/api/bears",$("#dobForm").serialize() ,function(data,status){
                $('#dayslived').html(data.name);
            });
            populateHistory();
        });

        function populateHistory(){
            $.get("/api/bears", function (data, status) {
                $('#history').find('tbody tr').remove();
                $(data).each(function(index,element){
                    console.log(element);
                    var entry = $(  "<tr><td>"+element._id+
                                    "</td><td>"+element.name+
                                    "</td><td>"+element.date_of_birth+
                                    "</td><td>"+element.days +
                                    "</td></tr>");
                    $('#history tbody').append(entry);
                });
            });
        };